# [Programmers 76502 - 괄호 회전하기](https://school.programmers.co.kr/learn/courses/30/lessons/76502)

## 문제 설명

다음 규칙을 지키는 문자열을 올바른 괄호 문자열이라고 정의합니다.

- `()`, `[]`, `{}` 는 모두 올바른 괄호 문자열입니다.
- 만약 `A`가 올바른 괄호 문자열이라면, `(A)`, `[A]`, `{A}` 도 올바른 괄호 문자열입니다. 예를 들어, `[]` 가 올바른 괄호 문자열이므로, `([])` 도 올바른 괄호 문자열입니다.
- 만약 `A`, `B`가 올바른 괄호 문자열이라면, `AB` 도 올바른 괄호 문자열입니다. 예를 들어, `{}` 와 `([])` 가 올바른 괄호 문자열이므로, `{}([])` 도 올바른 괄호 문자열입니다.

대괄호, 중괄호, 그리고 소괄호로 이루어진 문자열 `s`가 매개변수로 주어집니다. 이 `s`를 왼쪽으로 x (0 ≤ x < (`s`의 길이)) 칸만큼 회전시켰을 때 `s`가 올바른 괄호 문자열이 되게 하는 x의 개수를 return 하도록 solution 함수를 완성해주세요.

## 제한 사항

- s의 길이는 1 이상 1,000 이하입니다.

## 입출력 예

| s        | result |
| -------- | ------ |
| "[](){}" | 3      |
| "}]()[{" | 2      |
| "[)(]"   | 0      |
| "}}}"    | 0      |

## 입출력 예 설명

입출력 예 #1

- 다음 표는 `"[](){}"` 를 회전시킨 모습을 나타낸 것입니다.

| x   | s를 왼쪽으로 x칸만큼 회전 | 올바른 괄호 문자열? |
| --- | ------------------------- | ------------------- |
| 0   | "[](){}"                  | O                   |
| 1   | "](){}["                  | X                   |
| 2   | "(){}[]"                  | O                   |
| 3   | "){}[]("                  | X                   |
| 4   | "{}[]()"                  | O                   |
| 5   | "}[](){"                  | X                   |

- 올바른 괄호 문자열이 되는 x가 3개이므로, 3을 return 해야 합니다.

입출력 예 #2

- 다음 표는 `"}]()[{"` 를 회전시킨 모습을 나타낸 것입니다.

| x   | s를 왼쪽으로 x칸만큼 회전 | 올바른 괄호 문자열? |
| --- | ------------------------- | ------------------- |
| 0   | "}]()[{"                  | X                   |
| 1   | "]()[{}"                  | X                   |
| 2   | "()[{}]"                  | O                   |
| 3   | ")[{}]("                  | X                   |
| 4   | "[{}]()"                  | O                   |
| 5   | "{}]()["                  | X                   |

- 올바른 괄호 문자열이 되는 x가 2개이므로, 2를 return 해야 합니다.

입출력 예 #3

- s를 어떻게 회전하더라도 올바른 괄호 문자열을 만들 수 없으므로, 0을 return 해야 합니다.

입출력 예 #4

- s를 어떻게 회전하더라도 올바른 괄호 문자열을 만들 수 없으므로, 0을 return 해야 합니다.

---

## 문제 정보

| 난이도 | Lv.2 |
| ------ | ---- |
| 정답률 | 69%  |

## 풀이 정보

| 풀이 시간 | 26 min |
| --------- | ------ |
| 알고리즘  | 스택   |

| 정확성 테스트                       |
| ----------------------------------- |
| 테스트 1 〉 통과 (5.98ms, 84.2MB)   |
| 테스트 2 〉 통과 (4.20ms, 86.8MB)   |
| 테스트 3 〉 통과 (4.16ms, 94.3MB)   |
| 테스트 4 〉 통과 (4.57ms, 80.6MB)   |
| 테스트 5 〉 통과 (12.96ms, 76.3MB)  |
| 테스트 6 〉 통과 (7.50ms, 71.6MB)   |
| 테스트 7 〉 통과 (8.75ms, 96.1MB)   |
| 테스트 8 〉 통과 (14.04ms, 75.1MB)  |
| 테스트 9 〉 통과 (28.83ms, 86.6MB)  |
| 테스트 10 〉 통과 (35.53ms, 75.9MB) |
| 테스트 11 〉 통과 (32.35ms, 94.3MB) |
| 테스트 12 〉 통과 (0.05ms, 71.1MB)  |
| 테스트 13 〉 통과 (0.17ms, 85MB)    |
| 테스트 14 〉 통과 (0.18ms, 88.9MB)  |

## 코드

```java
import java.util.*;

class Solution {
    public int solution(String s) {
        int answer = 0;

        // 0칸부터 (s의 길이 - 1)칸까지 반복문으로 계산
        for (int i = 0; i < s.length(); i++) {
            if (isRight(s, i)) answer++;
        }

        return answer;
    }

    // 스택 자료구조로 올바른 괄호 문자열인지 판단
    private static boolean isRight(String str, int jump) {
        Deque<Character> stack = new ArrayDeque<>();

        for (int i = 0; i < str.length(); i++) {
            // 시작 인덱스를 한 칸씩 옮기는 방식으로 회전 계산
            char c = str.charAt((i + jump) % str.length());

            // 열린 괄호면 스택에 푸시하고 닫힌 괄호면 최근에 스택에 푸시한 괄호와 대칭인지 비교
            if (c == '(' || c == '{' || c == '[') {
                stack.push(c);
            } else if (c == ')') {
                if (!stack.isEmpty() && stack.peek() == '(') {
                    stack.pop();
                } else {
                    return false;
                }
            } else if (c == '}') {
                if (!stack.isEmpty() && stack.peek() == '{') {
                    stack.pop();
                } else {
                    return false;
                }
            } else if (c == ']') {
                if (!stack.isEmpty() && stack.peek() == '[') {
                    stack.pop();
                } else {
                    return false;
                }
            }
        }

        // 스택이 비어있지 않으면 괄호 짝이 안맞아서 남는 경우
        if (!stack.isEmpty()) return false;

        return true;
    }
}
```

## 해설

괄호 유형의 문제로 대표적인 해결 방법인 스택 자료구조를 활용하면 간단하게 해결할 수 있다. 괄호는 최근에 열린 괄호와 쌍이 맞아야 하므로 최근 아이템을 담는 스택 자료구조로 현재 괄호와 최근에 담은 괄호가 쌍이 맞는지 체크하면 올바른 괄호 문자열을 구할 수 있다. 이때 스택이 비어있는 경우나 전체 계산 후 스택에 남은 괄호가 있는 예외까지 고려해야 한다. 회전의 경우 모듈러 연산을 활용해 시작 인덱스의 위치와 끝 인덱스의 위치를 조정하는 방식으로 회전된 괄호 문자열처럼 다룰 수 있다.

## 리뷰

괄호를 스택으로 해결하는 방식만 알면 간단한 문제였다.

---
